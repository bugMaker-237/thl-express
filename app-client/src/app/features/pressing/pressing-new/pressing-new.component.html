<StackLayout class="page-block">
  <nav-bar text="Faites laver vos vêtements"></nav-bar>
  <ScrollView class="stack" height="100%">
    <StackLayout #stack padding="20">
      <Button [text]="selectedCloth" (tap)="chooseCloth()"></Button>

      <core-ui-tf
        hint="Quantité"
        [(ngModel)]="pressingRequest.quantity"
        required="true"
        keyboardType="number"
        [editable]="!formDisabled"
        autocorrect="false"
        customClass="m-b-20 m-t-10 text-field-outline"
        customTextFieldClass="no-border p-10"
      ></core-ui-tf>
      <TextView
        height="100"
        hint="Détail sur le vêtement"
        [(ngModel)]="pressingRequest.details"
        required="true"
        [editable]="!formDisabled"
        autocorrect="false"
        returnType="done"
        (returnPress)="onReturnPress($event)"
        class="m-b-20 m-t-10 text-field-outline p-10 m-r-5 m-l-5"
      ></TextView>

      <Button
        class="btn btn-primary text-black"
        height="64"
        margin="0"
        text="Ajouter"
        type="submit"
        (tap)="addCloth()"
      ></Button>
      <CardView
        *ngFor="let item of addedCloths"
        elevation="4"
        class="m-l-5 m-r-5 m-t-10 m-b-10"
      >
        <StackLayout padding="10">
          <GridLayout
            class="p-b-5 m-b-5"
            columns="auto, *, auto"
            verticalAlignment="center"
          >
            <StackLayout col="0" horizontalAlignment="left">
              <core-ui-icon
                verticalAlignment="center"
                horizontalAlignment="left"
                name="close"
                size="24"
                (tapAction)="removeItem(item)"
              >
              </core-ui-icon>
            </StackLayout>
            <label
              verticalAlignment="center"
              horizontalAlignment="center"
              class="m-r-5"
              [text]="item.price + ' FCFA'"
              col="1"
            ></label>
            <StackLayout col="2" horizontalAlignment="right">
              <core-ui-icon
                verticalAlignment="center"
                horizontalAlignment="right"
                name="edit"
                size="24"
                (tapAction)="editItem(item)"
              >
              </core-ui-icon>
            </StackLayout>
          </GridLayout>
          <GridLayout class="p-t-5 p-b-5 m-b-5 b-b-1 b-t-1" columns="*, auto">
            <label
              row="0"
              col="0"
              horizontalAlignment="left"
              colSpan="2"
              [text]="getClothName(item.type) + ' (' + item.quantity + ')'"
            ></label>
            <label
              row="0"
              col="1"
              textWrap="true"
              [text]="'Prix unitaire : ' + getUnitPrice(item.type) + ' FCFA'"
              row="0"
              col="1"
            ></label>
          </GridLayout>
          <Label [text]="item.details" textWrap="true"></Label>
        </StackLayout>
      </CardView>
      <Button
        class="btn btn-accent text-white"
        height="64"
        margin="0"
        text="Enregistrer"
        (tap)="save()"
      ></Button>
    </StackLayout>
  </ScrollView>
</StackLayout>
